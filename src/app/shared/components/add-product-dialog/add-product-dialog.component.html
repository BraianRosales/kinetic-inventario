<div class="addProductDiaog">
  <div class="addProductDiaog-header">
    <h2 mat-dialog-title>{{ dialogTitle }}</h2>
    <button mat-icon-button (click)="onCancel()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="productForm" class="addProductDiaog-form">
    <div class="form-row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombre del Producto</mat-label>
        <input
          matInput
          formControlName="name"
          placeholder="Ej: Filtro de aceite"
        />
        <mat-error *ngIf="isFieldInvalid('name')">
          {{ getErrorMessage("name") }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Descripción</mat-label>
        <textarea
          matInput
          formControlName="description"
          rows="3"
          placeholder="Describe el producto..."
        ></textarea>
        <mat-error *ngIf="isFieldInvalid('description')">
          {{ getErrorMessage("description") }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row two-columns">
      <mat-form-field appearance="outline">
        <mat-label>Precio</mat-label>
        <input matInput type="number" formControlName="price" placeholder="0" />
        <span matSuffix>$</span>
        <mat-error *ngIf="isFieldInvalid('price')">
          {{ getErrorMessage("price") }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Stock</mat-label>
        <input matInput type="number" formControlName="stock" placeholder="0" />
        <mat-error *ngIf="isFieldInvalid('stock')">
          {{ getErrorMessage("stock") }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row two-columns">
      <mat-form-field appearance="outline">
        <mat-label>Marca</mat-label>
        <input matInput formControlName="brand" placeholder="Ej: Mann" />
        <mat-error *ngIf="isFieldInvalid('brand')">
          {{ getErrorMessage("brand") }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Ubicación</mat-label>
        <input
          matInput
          formControlName="location"
          placeholder="Ej: Estante A1"
        />
        <mat-error *ngIf="isFieldInvalid('location')">
          {{ getErrorMessage("location") }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Categorías</mat-label>
        <mat-select formControlName="categories" multiple>
          <mat-option
            *ngFor="let category of availableCategories"
            [value]="category.id"
          >
            {{ category.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="isFieldInvalid('categories')">
          {{ getErrorMessage("categories") }}
        </mat-error>
      </mat-form-field>
    </div>
  </form>

  <div class="addProductDiaog-actions">
    <button mat-button (click)="onCancel()" class="cancel-button">
      Cancelar
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="onSave()"
      [disabled]="productForm.invalid"
      class="save-button"
    >
      <mat-icon>save</mat-icon>
      Guardar Producto
    </button>
  </div>
</div>
